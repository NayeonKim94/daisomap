<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>2025 다이소 가맹점 지도 (비공식)</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>
      body {
        font-family: 'Malgun Gothic', 'Apple SD Gothic Neo', Arial, sans-serif;
        margin: 0; padding: 0;
        background: #fafafd;
      }
      h1 {
        text-align: center;
        margin: 20px 0 10px 0;
        font-size: 2em;
      }
      #container {
        max-width: 540px;
        margin: auto;
        padding: 10px;
      }
      #searchBox {
        margin-bottom: 12px;
        width: 100%;
        max-width: 400px;
        padding: 10px;
        font-size: 1.1em;
        border: 1px solid #ddd;
        border-radius: 8px;
        box-sizing: border-box;
        display: block;
        margin-left: auto;
        margin-right: auto;
      }
      #results {
        margin-bottom:15px;
        background: #fff;
        border-radius: 8px;
        box-shadow: 0 2px 6px rgba(0,0,0,0.03);
        font-size: 1em;
      }
      .store-item {
        padding:12px;
        border-bottom:1px solid #f0f0f0;
        cursor:pointer;
        transition: background 0.15s;
      }
      .store-item:hover, .store-item:active {
        background:#ffe4e1;
      }
      .no-result {
        color:#E13A3A;
        padding:16px;
        text-align:center;
      }
      #map {
        width: 100%;
        height: 380px;
        border-radius: 12px;
        box-shadow: 0 2px 8px rgba(0,0,0,0.07);
      }
      footer {
        text-align: center;
        color: #888;
        margin: 30px 0 15px 0;
        font-size: 0.97em;
        line-height: 1.8;
        background: none;
      }
      .disclaimer {
        color: #DA0037;
        font-size: 0.87em; /* 기존보다 2pt(픽셀)만큼 작게 */
        margin-bottom: 5px;
      }
      @media (max-width: 600px) {
        #container {
          max-width: 100vw;
          padding: 4vw;
        }
        #map {
          height: 56vw;
          min-height: 260px;
        }
        h1 { font-size: 1.3em; }
        #searchBox { font-size:1em; }
        .store-item { font-size: 0.98em; }
        .disclaimer { font-size: 0.82em; }
      }
    </style>
</head>
<body>
  <div id="container">
    <h1>다이소 가맹점 지도 (비공식)</h1>
    <input type="text" id="searchBox" placeholder="지역명으로 검색 (예: 경주)">
    <div id="results"></div>
    <div id="map"></div>
  </div>
  <footer>
    <div class="disclaimer">
      ※ 본 사이트는 다이소 및 아성다이소와 무관한 비공식 서비스입니다.<br>
      매장 정보의 정확성은 보장되지 않을 수 있으며, 공식 정보는 다이소 홈페이지를 참고해주세요.
    </div>
    © <span id="year"></span> 가맹점 위치 안내 서비스 | All rights reserved. | 만든이: Nayeon Kim
  </footer>
  <script type="text/javascript" src="//dapi.kakao.com/v2/maps/sdk.js?appkey=32b4338378d7c102f93e7548e7db28e4"></script>
  <script>
    // 저작권 연도 자동 입력
    document.getElementById('year').innerText = new Date().getFullYear();

    // 빨간색 마커 이미지 (카카오 공식)
    var redMarkerUrl = 'https://t1.daumcdn.net/localimg/localimages/07/mapapidoc/marker_red.png';

    var stores = [
      {name: "다이소 경주점", lat: 35.8562, lng: 129.2247, address: "경북 경주시 원화로 295", tel: "054-000-0000"},
      {name: "다이소 경주터미널점", lat: 35.8434, lng: 129.2033, address: "경북 경주시 구황로 36", tel: "054-111-2222"},
      {name: "다이소 서울점", lat: 37.5665, lng: 126.9780, address: "서울특별시 중구 세종대로 110", tel: "02-333-4444"},
      {name: "다이소 부산점", lat: 35.1796, lng: 129.0756, address: "부산광역시 중구 중앙대로 26", tel: "051-555-6666"}
    ];

    var mapContainer = document.getElementById('map'),
        mapOption = {center: new kakao.maps.LatLng(36.5, 127.9), level: 7};
    var map = new kakao.maps.Map(mapContainer, mapOption);

    var markers = [];
    var infowindows = [];

    function showStores(filteredStores) {
      // 마커/인포윈도우 삭제
      markers.forEach(function(marker){ marker.setMap(null); });
      infowindows.forEach(function(iw){ iw.close(); });
      markers = [];
      infowindows = [];

      filteredStores.forEach(function(store, idx){
        var marker = new kakao.maps.Marker({
          map: map,
          position: new kakao.maps.LatLng(store.lat, store.lng),
          image: new kakao.maps.MarkerImage(redMarkerUrl, new kakao.maps.Size(32, 35), {offset: new kakao.maps.Point(16, 34)})
        });
        var infowindow = new kakao.maps.InfoWindow({
          content: '<div style="padding:7px 10px;font-size:15px;font-weight:bold;">' + store.name + '</div>'
                  + '<div style="font-size:13px;">' + store.address + '<br>' + store.tel + '</div>'
        });
        kakao.maps.event.addListener(marker, 'click', function() {
          infowindows.forEach(function(iw){ iw.close(); }); // 모두 닫고
          infowindow.open(map, marker);
        });
        markers.push(marker);
        infowindows.push(infowindow);
      });

      // 매장 있으면 첫 매장 위치로 지도 이동
      if (filteredStores.length > 0) {
        map.setCenter(new kakao.maps.LatLng(filteredStores[0].lat, filteredStores[0].lng));
      }
    }

    function showResults(filteredStores) {
      var resultsDiv = document.getElementById('results');
      resultsDiv.innerHTML = "";
      if (filteredStores.length === 0) {
        resultsDiv.innerHTML = '<div class="no-result">해당 지역은 다이소 가맹점이 없습니다</div>';
        return;
      }
      filteredStores.forEach(function(store, idx){
        var div = document.createElement('div');
        div.className = 'store-item';
        div.innerHTML = `<b>${store.name}</b><br>${store.address}<br>${store.tel}`;
        div.onclick = function(){
          map.setCenter(new kakao.maps.LatLng(store.lat, store.lng));
          infowindows.forEach(function(iw){ iw.close(); }); // 모두 닫고
          infowindows[idx].open(map, markers[idx]);
        };
        resultsDiv.appendChild(div);
      });
    }

    // 검색창 기능
    document.getElementById('searchBox').addEventListener('input', function(){
      var keyword = this.value.trim();
      var filtered = [];
      if (keyword === "") {
        filtered = stores;
      } else {
        filtered = stores.filter(function(store){
          return store.name.includes(keyword) || store.address.includes(keyword);
        });
      }
      showResults(filtered);
      showStores(filtered);
    });

    // 페이지 처음엔 전체 매장 보여주기
    showResults(stores);
    showStores(stores);
  </script>
</body>
</html>
