<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>🟥 2025 다이소 가맹점 지도 🟥</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- 구글 서치콘솔 (필요 시 유지) -->
  <meta name="google-site-verification" content="WnF2ei0gbsnq-e36FIffn4uhUWwkS6yNiJsrByOPc3Q" />
  <!-- 네이버 웹마스터 도구 메타태그 -->
  <meta name="naver-site-verification" content="6849084147f03b69eb44415e048d1945ef1f54e2" />
  <!-- 구글 애드센스 스니펫 -->
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8824850904878308"
    crossorigin="anonymous"></script>
  <style>
    body { font-family: 'Malgun Gothic', 'Apple SD Gothic Neo', Arial, sans-serif; margin: 0; padding: 0; background: #fafafd; }
    h1 { text-align: center; margin: 26px 0 7px 0; font-size: 2.2em; }
    #subtitle { text-align: center; font-size: 0.52em; color: #444; margin-bottom: 5px; font-weight: 500; }
    #region-alert { text-align: center; font-size: 0.92em; color: #d12d3a; margin-bottom: 12px; font-weight: 500;}
    #kakao-alert { display: none; max-width: 96vw; margin: 0 auto 10px auto; background: #ffeaea; color: #cf2222; border-radius: 11px; font-size: 0.73em; padding: 8px 11px 8px 10px; line-height: 1.7; word-break: keep-all; text-align: center; font-weight: 500;}
    #container { max-width: 900px; margin: auto; padding: 10px; }
    .search-wrap { position: relative; width: 100%; max-width: 400px; margin: 0 auto 12px auto; }
    #searchBox { width: 100%; padding: 10px 40px 10px 10px; font-size: 1.1em; border: 1px solid #ddd; border-radius: 8px; box-sizing: border-box;}
    .search-icon {
      position: absolute; right: 13px; top: 50%; transform: translateY(-50%);
      width: 21px; height: 21px; pointer-events: none; opacity: 0.6;
    }
    #results { margin-bottom:15px; background: #fff; border-radius: 8px; box-shadow: 0 2px 6px rgba(0,0,0,0.03); font-size: 1em;}
    .store-item { padding:12px; border-bottom:1px solid #f0f0f0; cursor:pointer; transition: background 0.15s; }
    .store-item:hover, .store-item:active { background:#ffe4e1; }
    .no-result { color:#E13A3A; padding:16px; text-align:center; }
    #map { width: 100%; min-width: 0; height: 400px; border-radius: 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.07); background: #fff; margin-bottom: 18px;}
    #pagination { text-align:center; margin-bottom: 15px; }
    .page-btn { display:inline-block; margin:0 4px; font-size:1em; border:none; background:none; cursor:pointer; color:#555; padding:2px 7px; border-radius:4px;}
    .page-btn.active, .page-btn:active { background:#ffe4e1; color:#c00; font-weight:bold;}
    .page-btn.block { color: #333; font-weight: bold; padding:2px 7px; }
    .hits-counter {
      position: fixed;
      right: 16px;
      bottom: 16px;
      z-index: 999;
      background: none;
      border: none;
      box-shadow: none;
      padding: 0;
      margin: 0;
      cursor: pointer;
    }
    @media (max-width: 700px) {
      #map { height: 200px;}
      h1 { font-size: 1.13em; }
      #subtitle { font-size: 0.38em; }
      #region-alert { font-size: 0.72em;}
      .hits-counter { right: 7px; bottom: 7px; }
    }
    footer {
      text-align: center;
      color: #111;
      margin: 0;
      margin-bottom: 10px;
      font-size: 0.58em;
      line-height: 1.7;
      background: none;
      padding: 0;
    }
    .adnotice { color: #111; margin-bottom: 3px; font-size: inherit;}
    .disclaimer { color: #DA0037; margin-bottom: 3px; font-size: inherit;}
  </style>
</head>
<body>
  <div id="kakao-alert">
    ⚠️ 카카오톡에서는 지도가 보이지 않을 수 있습니다.<br>
    오른쪽 위 ⋮ 버튼 또는, 하단 ↑ 버튼에서 Safari/Chrome으로 열어주세요!
  </div>
  <div id="container">
    <h1>🟥 2025 다이소 가맹점 지도 🟥</h1>
    <div id="subtitle">민생회복 소비쿠폰 사용처 안내</div>
    <div id="region-alert"><b>*현재 검색 가능 지역: 서울, 경북</b></div>
    <div class="search-wrap">
      <input type="text" id="searchBox" placeholder="지역명으로 검색 (예: 경주)">
      <svg class="search-icon" viewBox="0 0 20 20" fill="none"><circle cx="9" cy="9" r="7" stroke="#222" stroke-width="2"/><path d="M15 15L18 18" stroke="#222" stroke-width="2" stroke-linecap="round"/></svg>
    </div>
    <div id="results"></div>
    <div id="pagination"></div>
    <div id="map"></div>
    <!-- 지도 바로 아래 안내문구! -->
    <footer>
      <div class="adnotice">
        이 포스팅은 쿠팡 파트너스 활동의 일환으로, 이에 따른 일정액의 수수료를 제공받습니다.
      </div>
      <div class="disclaimer">
        ※ 본 사이트는 다이소 및 아성다이소와 무관한 비공식 서비스입니다. 매장 정보의 정확성은 보장되지 않을 수 있으며, 공식 정보는 다이소 홈페이지를 참고해주세요.
      </div>
      © 2025 가맹점 위치 안내 서비스 | All rights reserved. | 만든이: noystudiokr@gmail.com
    </footer>
    <!-- 광고는 안내문구 아래! (쿠팡 공식문법) -->
    <div id="ad-vertical">
      <script src="https://ads-partners.coupang.com/g.js"></script>
      <script>
        new PartnersCoupang.G({
          "id": 887502,
          "template": "carousel",
          "trackingCode": "AF1267708",
          "width": "400",
          "height": "140",
          "tsource": ""
        });
      </script>
    </div>
  </div>
  <!-- 방문자수(히트카운터) - 지도 바깥 오른쪽 아래 고정 -->
  <a href="https://hits.sh/nayeonkim94.github.io/daisomap/" target="_blank" class="hits-counter">
    <img alt="Hits" src="https://hits.sh/nayeonkim94.github.io/daisomap.svg?view=today-total&style=flat-square&label=visitors&extraCount=1000&color=ffffff&labelColor=ffffff"/>
  </a>
  <!-- 카카오맵 JS (앱키 반영) -->
  <script src="//dapi.kakao.com/v2/maps/sdk.js?appkey=06e2de1c3f29ccc741cf52c85c53d885"></script>
  <script>
    function isKakaoInApp() {
      const ua = navigator.userAgent.toLowerCase();
      return ua.includes("kakaotalk");
    }

    window.onload = function() {
      if (isKakaoInApp()) {
        document.getElementById('kakao-alert').style.display = 'block';
      }

      // 다이소 가맹점 데이터
      var stores = [
        // ... (여기에 name, address, tel, lat, lng 포함한 모든 매장 데이터. 기존 코드 그대로 넣음!)
        // 아래는 일부 예시, 전체 데이터는 생략하지 말고 사용!
        {name:"다이소 경북고령점",address:"경북 고령군 대가야읍 우륵로 18",tel:"054-954-8837",lat:35.73148218,lng:128.2695328},
        // ... 중략 ...
        {name:"다이소 흑석점",address:"서울 동작구 서달로 161-1",tel:"02-3280-6733",lat:37.5078135,lng:126.9622592}
      ];
      stores.sort((a,b)=>a.name.localeCompare(b.name,"ko"));

      // 페이지네이션
      const PAGE_SIZE = 5;
      const PAGE_BLOCK = 5;
      let filteredStores = stores;
      let currentPage = 1;

      function showResults(page=1) {
        currentPage = page;
        const start = (page-1)*PAGE_SIZE;
        const pageStores = filteredStores.slice(start, start+PAGE_SIZE);
        const resultsDiv = document.getElementById('results');
        resultsDiv.innerHTML = "";
        if(pageStores.length === 0) {
          resultsDiv.innerHTML = `<div class="no-result">해당지역은 아직 등록이 안됐습니다</div>`;
          document.getElementById('map').style.display = "none";
          return;
        }
        document.getElementById('map').style.display = "";
        pageStores.forEach((store,idx)=>{
          const div = document.createElement('div');
          div.className = 'store-item';
          div.innerHTML = `<b>${store.name}</b><br>${store.address}<br>${store.tel}`;
          div.onclick = function(){
            map.setCenter(new kakao.maps.LatLng(store.lat, store.lng));
            infowindows.forEach(iw=>iw.close());
            infowindows[idx].open(map, markers[idx]);
          };
          resultsDiv.appendChild(div);
        });
        showStores(pageStores);
        setPagination(page, Math.ceil(filteredStores.length / PAGE_SIZE));
      }

      function setPagination(current, total) {
        const paginationDiv = document.getElementById('pagination');
        paginationDiv.innerHTML = "";

        let blockStart = Math.floor((current-1)/PAGE_BLOCK)*PAGE_BLOCK+1;
        let blockEnd = Math.min(blockStart + PAGE_BLOCK - 1, total);

        if(blockStart > 1) {
          const prev = document.createElement('button');
          prev.innerText = '◀';
          prev.className = 'page-btn block';
          prev.onclick = ()=> showResults(blockStart-1);
          paginationDiv.appendChild(prev);
        }

        for(let i=blockStart;i<=blockEnd;i++) {
          const btn = document.createElement('button');
          btn.innerText = i;
          btn.className = 'page-btn' + (i === current ? ' active':'');
          btn.onclick = ()=> showResults(i);
          paginationDiv.appendChild(btn);
        }

        if(blockEnd < total) {
          const next = document.createElement('button');
          next.innerText = '▶';
          next.className = 'page-btn block';
          next.onclick = ()=> showResults(blockEnd+1);
          paginationDiv.appendChild(next);
        }
      }

      // 지도, 마커, 인포윈도우
      var mapContainer = document.getElementById('map'),
        mapOption = {center: new kakao.maps.LatLng(36.5, 127.9), level: 8};
      var map = new kakao.maps.Map(mapContainer, mapOption);

      var markers = [];
      var infowindows = [];

      function showStores(pageStores) {
        markers.forEach(marker=>marker.setMap(null));
        infowindows.forEach(iw=>iw.close());
        markers = [];
        infowindows = [];
        pageStores.forEach(function(store, idx){
          var infowindow = new kakao.maps.InfoWindow({
            content:
              `<div style="max-width:98vw; min-width:150px; width:auto; word-break:break-all; white-space:normal; font-size:15px; line-height:1.7; padding:13px 17px; font-family:'Malgun Gothic',Arial,sans-serif; box-sizing:border-box; border-radius:6px; background:#fff; border:0; box-shadow:0 2px 8px rgba(0,0,0,0.09);">
                <b style="font-size:16px; display:block; margin-bottom:5px;">${store.name}</b>
                <span style="font-size:14px;">${store.address}</span><br>
                <span style="font-size:14px;">${store.tel}</span>
              </div>`,
            removable: false,
            zIndex: 2,
            disableAutoPan: false
          });
          var marker = new kakao.maps.Marker({
            map: map,
            position: new kakao.maps.LatLng(store.lat, store.lng),
            image: new kakao.maps.MarkerImage('https://t1.daumcdn.net/localimg/localimages/07/mapapidoc/marker_red.png', new kakao.maps.Size(32, 35), {offset: new kakao.maps.Point(16, 34)})
          });
          kakao.maps.event.addListener(marker, 'click', function() {
            infowindows.forEach(iw=>iw.close());
            infowindow.open(map, marker);
          });
          markers.push(marker);
          infowindows.push(infowindow);
        });

        if (pageStores.length > 0) {
          map.setCenter(new kakao.maps.LatLng(pageStores[0].lat, pageStores[0].lng));
          infowindows[0].open(map, markers[0]);
        }
      }

      // 검색 기능
      document.getElementById('searchBox').addEventListener('input', function(){
        var keyword = this.value.trim();
        if (keyword === "") {
          filteredStores = stores;
        } else {
          filteredStores = stores.filter(function(store){
            return store.name.includes(keyword) || store.address.includes(keyword);
          });
        }
        currentPage = 1;
        showResults(currentPage);
      });

      showResults(1);
    }; // window.onload 끝
  </script>
</body>
</html>
